<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragments/head :: head('Search Results - StayFinder')}"></head>
<body>
    <div th:replace="~{fragments/navbar :: navbar}"></div>

    <section class="max-w-7xl mx-auto px-6 py-12">
        <header class="mb-8">
            <h2 class="text-2xl font-bold text-gray-900">Homestays in <span th:text="${location}">Location</span></h2>
            <p class="text-sm text-gray-600">From <span th:text="${checkIn}">Date</span> to <span th:text="${checkOut}">Date</span></p>
        </header>

        <div th:if="${homestays.isEmpty()}" class="rounded-lg bg-yellow-50 border border-yellow-200 p-4 text-yellow-700">No homestays available for the selected dates.</div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-6">
            <div th:each="homestay : ${homestays}" class="bg-white rounded-2xl shadow hover:shadow-lg transition overflow-hidden flex flex-col">
                <a th:href="@{/homestays/{id}(id=${homestay.id})}" class="block">
                    <img th:src="@{'/images/' + homestay.id + '.jpg'}" alt="Homestay Image" class="w-full h-48 object-cover" onerror="this.onerror=null;this.src='/images/placeholder.svg';" />
                </a>
                <div class="p-4 flex-1 flex flex-col">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900" th:text="${homestay.location}">Location</h3>
                        <p class="text-sm text-gray-600 mt-2 line-clamp-3" th:text="${homestay.description != null ? homestay.description : 'No description available.'}">Description</p>
                    </div>
                    <div class="mt-4 flex items-center justify-between">
                        <div class="text-sm text-gray-700"><strong>Price: â‚¹</strong><span th:text="${homestay.price}">Price</span>/night</div>
                        <a th:href="@{/homestays/{id}(id=${homestay.id})}" class="inline-block bg-primary text-white px-4 py-2 rounded-lg text-sm hover:opacity-90">View Details</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-8">
            <a href="/search" class="inline-block text-sm text-gray-700 hover:underline">New Search</a>
        </div>
    </section>

</body>
</html>